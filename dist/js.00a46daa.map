{"version":3,"sources":["js/index.js"],"names":["json_link","urlParams","URLSearchParams","window","location","search","gallery","document","querySelector","addEventListener","init","cat","get","activeFilter","console","log","objProject","name","subtitle","type","description","keywords","image","category","relatedpost","title","url","otherimages","id","wpid","project","projectsArray","currentArray","fetch","then","e","json","data","buildList","forEach","dataProject","Object","create","rendered","_embedded","media_details","sizes","full","source_url","acf","categories","key","startsWith","push","indexOf","displayArray","urlIndex","displayList","displayProject","listOfProjects","clearList","cloneProject","oneProject","template","content","clone","cloneNode","imgLoaded","appendChild","downloadingImage","Image","loader","projectImg","projectWrap","projectTitle","onload","classList","add","checkImgOrientation","src","source","displayImg","naturalWidth","naturalHeight","remove","innerWidth","style","marginBottom","height","setAttribute","innerHTML","dataset","projectId","clickedFilter","event","filter","preventDefault","filterByCat","byCat","toString","clickedPost","postClicked","target","index","parentElement"],"mappings":"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","file":"js.00a46daa.map","sourceRoot":"..","sourcesContent":["\"use strict\";\n\nlet json_link =\n  \"https://portfolio-backend.mathildefrachon.com/wp-json/wp/v2/projects?_embed&per_page=20\";\nlet urlParams = new URLSearchParams(window.location.search);\n\nconst gallery = document.querySelector(\"#gallery\");\n\nwindow.addEventListener(\"DOMContentLoaded\", init);\n\n/* THIS IS AFTER CLICKING ON A PROJECT / SUBPAGE */\nlet cat = urlParams.get(\"category\");\nlet activeFilter = cat;\nif (cat) {\n  console.log(\"array have a category : \" + cat);\n  json_link = json_link + \"&categories=\" + cat;\n}\n\n// CREATE OBJECT PROJECT\n\nconst objProject = {\n  name: \"\",\n  subtitle: \"\",\n  type: \"\",\n  description: \"\",\n  keywords: \"\",\n  image: \"\",\n  category: \"\",\n  relatedpost: {\n    title: \"\",\n    url: \"\"\n  },\n  otherimages: [],\n  id: null,\n  wpid: null\n};\n\nlet project = \"\";\nconst projectsArray = [];\nlet currentArray = [];\n\nfunction init() {\n  // fetch JSON\n  fetch(json_link)\n    .then(e => e.json())\n    .then(data => buildList(data));\n}\n\n// BUILD THE ARRAY OF PROJECTS\nfunction buildList(data) {\n  data.forEach(dataProject => {\n    project = Object.create(objProject);\n    project.name = dataProject.title.rendered;\n    project.wpid = dataProject.id;\n    project.image =\n      dataProject._embedded[\n        \"wp:featuredmedia\"\n      ][0].media_details.sizes.full.source_url;\n    project.subtitle = dataProject.acf.subtitle;\n    project.type = dataProject.acf.type;\n    project.description = dataProject.acf.description;\n    project.keywords = dataProject.acf.keywords;\n    project.otherimages = [];\n    project.category = dataProject.categories;\n    for (var key in dataProject.acf) {\n      if (key.startsWith(\"other_images\") && dataProject.acf[key]) {\n        project.otherimages.push(dataProject.acf[key]);\n      }\n    }\n    projectsArray.push(project);\n    project.id = projectsArray.indexOf(project);\n  });\n  currentArray = projectsArray;\n\n  displayArray(currentArray);\n}\n\n// DISPLAY THE ARRAY IN GALLERY AND IN SUBPAGE\nfunction displayArray(currentArray) {\n  let urlParams = new URLSearchParams(window.location.search);\n  let urlIndex = urlParams.get(\"index\");\n  if (urlIndex === null) {\n    displayList(currentArray);\n    console.log(\"we are on gallery\");\n  } else {\n    displayProject(currentArray);\n    console.log(\"we are on subpage\");\n  }\n}\n\n// DISPLAY ARRAY IN THE GALLERY\nfunction displayList(listOfProjects) {\n  currentArray = listOfProjects;\n  //CLEAR THE TABLE\n  clearList();\n  // CLONE FOR EACH PROJECT\n  cloneProject(listOfProjects);\n}\n\n//CLONE BY PROJECT AND APPEND\nfunction cloneProject(listOfProjects) {\n  listOfProjects.forEach(oneProject => {\n    let template = document.querySelector(\"#project-template\").content;\n    let clone = template.cloneNode(true);\n    // FILL IN THE CLONE\n    // let projectWrap = clone.querySelector(\".project-wrapper\");\n    imgLoaded(clone, oneProject);\n    // APPEND\n    gallery.appendChild(clone);\n  });\n}\n\n//WHEN IMG LOADED GIVE SRC AT PROJECT IMG + TAKE OUT LOADER\nfunction imgLoaded(clone, oneProject) {\n  let downloadingImage = new Image();\n  let loader = clone.querySelector(\".loader\");\n  let projectImg = clone.querySelector(\".project-img\");\n  let projectWrap = clone.querySelector(\".project-wrapper\");\n  let projectTitle = clone.querySelector(\"h2\");\n\n  downloadingImage.onload = function() {\n    loader.classList.add(\"none\");\n    checkImgOrientation(downloadingImage, projectImg, projectWrap);\n  };\n  downloadingImage.src = oneProject.image;\n  let source = downloadingImage.src;\n  displayImg(oneProject, projectImg, projectWrap, source, projectTitle);\n}\n\n// GIVE PORTRAIT OR LANDSCAPE CLASS\nfunction checkImgOrientation(downloadingImage, projectImg, projectWrap) {\n  //   console.log(myProject);\n  if (downloadingImage.naturalWidth > downloadingImage.naturalHeight) {\n    console.log(\"landscape img\");\n    projectImg.classList.remove(\"portrait\");\n    projectImg.classList.add(\"landscape\");\n\n    //for mobile\n    if (window.innerWidth < 1000) {\n      projectImg.style.marginBottom = \"20%\";\n      projectWrap.style.height = \"30vh\";\n    }\n  } else if (downloadingImage.naturalWidth < downloadingImage.naturalHeight) {\n    console.log(\"portrait img\");\n    projectImg.classList.add(\"portrait\");\n    projectImg.classList.remove(\"landscape\");\n  }\n}\n\n// GIVE SOURCE TO projectImg IN HTML + TITLE + ID AND WPID TO EACH CLONE\nfunction displayImg(oneProject, projectImg, projectWrap, source, projectTitle) {\n  console.log(projectImg);\n  projectImg.setAttribute(\"src\", source);\n  projectImg.classList.remove(\"none\");\n  projectWrap.classList.remove(\"width-load\");\n  projectTitle.innerHTML = oneProject.name;\n  projectImg.dataset.projectId = oneProject.id;\n  projectImg.dataset.wpid = oneProject.wpid;\n}\n\n// CLEAR THE ARRAY\nfunction clearList() {\n  gallery.innerHTML = \"\";\n}\n\n// ------------------- FILTER THE ARRAY ------------------------- //\n\n// SET ACTIVE FILTER NUMBER\nfunction clickedFilter(event) {\n  console.log(\"clickedFilter\");\n  const filter = this.dataset.filter;\n  console.log(filter);\n  activeFilter = filter;\n  event.preventDefault(); // PREVENT FROM GOIN BACK TO BEGINNING AFTER FILTERING\n  currentArray = filterByCat(filter);\n  console.log(currentArray);\n  displayArray(currentArray, filter);\n}\n\n// FILTER THE ARRAY AND RETURN IT\nfunction filterByCat(filter) {\n  currentArray = projectsArray.filter(byCat);\n\n  function byCat(project) {\n    if (project.category.toString() === filter.toString()) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  return currentArray;\n}\n\n// SET URL SUBPAGE WITH WPID OF POST OR FILTER OF CATEGORY\nfunction clickedPost(event) {\n  const postClicked = event.target;\n  console.log(postClicked);\n  let index = postClicked.dataset.wpid;\n  console.log(index);\n  let url = \"subpage.html?index=\" + index;\n  if (activeFilter) {\n    url += \"&category=\" + activeFilter;\n  }\n  postClicked.parentElement.setAttribute(\"href\", url);\n}\n"]}